// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import Get
import HTTPHeaders
import URLQueryEncoder

extension Paths.Orgs.WithOrg.Teams.WithTeamSlug.Repos.WithOwner {
    public func repo(_ repo: String) -> WithRepo {
        WithRepo(path: "\(path)/\(repo)")
    }

    public struct WithRepo {
        /// Path: `/orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}`
        public let path: String

        /// Check team permissions for a repository
        ///
        /// Checks whether a team has `admin`, `push`, `maintain`, `triage`, or `pull` permission for a repository. Repositories inherited through a parent team will also be checked.
        /// 
        /// You can also get information about the specified repository, including what permissions the team grants on it, by passing the following custom [media type](https://docs.github.com/rest/overview/media-types/) via the `application/vnd.github.v3.repository+json` accept header.
        /// 
        /// If a team doesn't have permission for the repository, you will receive a `404 Not Found` response status.
        /// 
        /// **Note:** You can also specify a team by `org_id` and `team_id` using the route `GET /organizations/{org_id}/team/{team_id}/repos/{owner}/{repo}`.
        ///
        /// [API method documentation](https://docs.github.com/rest/reference/teams/#check-team-permissions-for-a-repository)
        public var get: Request<OctoKit.TeamRepository> {
            Request(path: path, method: "GET", id: "teams/check-permissions-for-repo-in-org")
        }

        /// Add or update team repository permissions
        ///
        /// To add a repository to a team or update the team's permission on a repository, the authenticated user must have admin access to the repository, and must be able to see the team. The repository must be owned by the organization, or a direct fork of a repository owned by the organization. You will get a `422 Unprocessable Entity` status if you attempt to add a repository to a team that is not owned by the organization. Note that, if you choose not to pass any parameters, you'll need to set `Content-Length` to zero when calling out to this endpoint. For more information, see "[HTTP verbs](https://docs.github.com/rest/overview/resources-in-the-rest-api#http-verbs)."
        /// 
        /// **Note:** You can also specify a team by `org_id` and `team_id` using the route `PUT /organizations/{org_id}/team/{team_id}/repos/{owner}/{repo}`.
        /// 
        /// For more information about the permission levels, see "[Repository permission levels for an organization](https://help.github.com/en/github/setting-up-and-managing-organizations-and-teams/repository-permission-levels-for-an-organization#permission-levels-for-repositories-owned-by-an-organization)".
        ///
        /// [API method documentation](https://docs.github.com/rest/reference/teams/#add-or-update-team-repository-permissions)
        public func put(permission: PutRequest.Permission? = nil) -> Request<Void> {
            Request(path: path, method: "PUT", body: PutRequest(permission: permission), id: "teams/add-or-update-repo-permissions-in-org")
        }

        public struct PutRequest: Encodable {
            /// The permission to grant the team on this repository. Can be one of:  
            /// \* `pull` - team members can pull, but not push to or administer this repository.  
            /// \* `push` - team members can pull and push, but not administer this repository.  
            /// \* `admin` - team members can pull, push and administer this repository.  
            /// \* `maintain` - team members can manage the repository without access to sensitive or destructive actions. Recommended for project managers. Only applies to repositories owned by organizations.  
            /// \* `triage` - team members can proactively manage issues and pull requests without write access. Recommended for contributors who triage a repository. Only applies to repositories owned by organizations.  
            /// \* custom repository role name - A custom repository role if the owning organization has defined any.  
            ///   
            /// If no permission is specified, the team's `permission` attribute will be used to determine what permission to grant the team on this repository.
            public var permission: Permission?

            /// The permission to grant the team on this repository. Can be one of:  
            /// \* `pull` - team members can pull, but not push to or administer this repository.  
            /// \* `push` - team members can pull and push, but not administer this repository.  
            /// \* `admin` - team members can pull, push and administer this repository.  
            /// \* `maintain` - team members can manage the repository without access to sensitive or destructive actions. Recommended for project managers. Only applies to repositories owned by organizations.  
            /// \* `triage` - team members can proactively manage issues and pull requests without write access. Recommended for contributors who triage a repository. Only applies to repositories owned by organizations.  
            /// \* custom repository role name - A custom repository role if the owning organization has defined any.  
            ///   
            /// If no permission is specified, the team's `permission` attribute will be used to determine what permission to grant the team on this repository.
            public enum Permission: String, Codable, CaseIterable {
                case pull
                case push
                case admin
                case maintain
                case triage
            }

            public init(permission: Permission? = nil) {
                self.permission = permission
            }

            public func encode(to encoder: Encoder) throws {
                var values = encoder.container(keyedBy: StringCodingKey.self)
                try values.encodeIfPresent(permission, forKey: "permission")
            }
        }

        /// Remove a repository from a team
        ///
        /// If the authenticated user is an organization owner or a team maintainer, they can remove any repositories from the team. To remove a repository from a team as an organization member, the authenticated user must have admin access to the repository and must be able to see the team. This does not delete the repository, it just removes it from the team.
        /// 
        /// **Note:** You can also specify a team by `org_id` and `team_id` using the route `DELETE /organizations/{org_id}/team/{team_id}/repos/{owner}/{repo}`.
        ///
        /// [API method documentation](https://docs.github.com/rest/reference/teams/#remove-a-repository-from-a-team)
        public var delete: Request<Void> {
            Request(path: path, method: "DELETE", id: "teams/remove-repo-in-org")
        }
    }
}
